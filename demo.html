<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Floating Terminal System Demo</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/floating-terminals.css" />
    <style>
      body {
        margin: 0;
        padding: 0;
        background: linear-gradient(
          135deg,
          #0a0a0a 0%,
          #1a1a1a 50%,
          #0f0f0f 100%
        );
        min-height: 100vh;
        font-family: "JetBrains Mono", monospace;
      }

      .demo-header {
        text-align: center;
        padding: 20px;
        color: #00ff41;
        background: rgba(0, 0, 0, 0.5);
        border-bottom: 1px solid #21262d;
      }

      .demo-controls {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.8);
        padding: 15px;
        border-radius: 8px;
        border: 1px solid #21262d;
        z-index: 2000;
      }

      .demo-controls button {
        background: #0d1117;
        border: 1px solid #21262d;
        color: #00ff41;
        padding: 8px 12px;
        margin: 5px;
        border-radius: 4px;
        cursor: pointer;
        font-family: "JetBrains Mono", monospace;
        font-size: 0.8rem;
      }

      .demo-controls button:hover {
        background: rgba(0, 255, 65, 0.1);
        border-color: #00ff41;
      }

      .demo-info {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: rgba(0, 0, 0, 0.8);
        padding: 15px;
        border-radius: 8px;
        border: 1px solid #21262d;
        color: #c9d1d9;
        font-size: 0.8rem;
        max-width: 300px;
        z-index: 2000;
      }
    </style>
  </head>
  <body>
    <div class="demo-header">
      <h1>ðŸš€ Floating Terminal System Demo</h1>
      <p>Interactive 3D Terminal Windows with Random Positioning</p>
    </div>

    <div class="demo-controls">
      <h3 style="color: #00ff41; margin-top: 0">Controls</h3>
      <button onclick="terminalSystem.deactivateAllTerminals()">
        Deactivate All
      </button>
      <button onclick="addRandomTerminal()">Add Terminal</button>
      <button onclick="toggleDarkMode()">Toggle Dark Mode</button>
      <button onclick="resetPositions()">Reset Positions</button>
    </div>

    <div class="demo-info">
      <h3 style="color: #00ff41; margin-top: 0">Instructions</h3>
      <p><strong>Click:</strong> Activate terminal</p>
      <p><strong>Double-click:</strong> Maximize</p>
      <p><strong>Drag:</strong> Move terminal</p>
      <p><strong>Right-click:</strong> Context menu</p>
      <p><strong>Resize:</strong> Drag corner handle</p>
      <p><strong>Close:</strong> Click Ã— button</p>
    </div>

    <div class="floating-terminals">
      <!-- Terminals will be created by JavaScript -->
    </div>

    <script src="assets/js/floating-terminals.js"></script>
    <script>
      // Demo functions
      function addRandomTerminal() {
        const randomConfig = {
          id: `demo-terminal-${Date.now()}`,
          title: "Demo Terminal",
          path: "~/demo",
          size: ["terminal-small", "terminal-medium", "terminal-large"][
            Math.floor(Math.random() * 3)
          ],
          content: `
                    <h1>$ demo --random</h1>
                    <p><strong>ID:</strong> ${Date.now()}</p>
                    <p><strong>Size:</strong> ${randomConfig.size}</p>
                    <p><strong>Position:</strong> Random</p>
                    <p><em>This is a demo terminal</em></p>
                `,
          position: {
            x: Math.random() * (window.innerWidth - 300),
            y: Math.random() * (window.innerHeight - 200),
          },
        };

        const terminal = terminalSystem.createTerminal(
          randomConfig,
          terminalSystem.terminals.length
        );
        document.querySelector(".floating-terminals").appendChild(terminal);
        terminalSystem.terminals.push(terminal);
        terminalSystem.setupEventListeners();
      }

      function toggleDarkMode() {
        document.body.classList.toggle("dark-mode");
      }

      function resetPositions() {
        terminalSystem.terminals.forEach((terminal, index) => {
          const randomRotation = (Math.random() - 0.5) * 10;
          const randomOffset = (Math.random() - 0.5) * 20;
          terminal.style.transform = `rotate(${randomRotation}deg) translate(${randomOffset}px, ${randomOffset}px)`;
          terminal.style.left = `${
            Math.random() * (window.innerWidth - 300)
          }px`;
          terminal.style.top = `${
            Math.random() * (window.innerHeight - 200)
          }px`;
        });
      }

      // Performance monitoring
      let frameCount = 0;
      let lastTime = performance.now();

      function monitorPerformance() {
        frameCount++;
        const currentTime = performance.now();

        if (currentTime - lastTime >= 1000) {
          const fps = Math.round(
            (frameCount * 1000) / (currentTime - lastTime)
          );
          console.log(`FPS: ${fps}`);
          frameCount = 0;
          lastTime = currentTime;
        }

        requestAnimationFrame(monitorPerformance);
      }

      // Start performance monitoring
      monitorPerformance();

      // Keyboard shortcuts
      document.addEventListener("keydown", (e) => {
        if (e.ctrlKey || e.metaKey) {
          switch (e.key) {
            case "n":
              e.preventDefault();
              addRandomTerminal();
              break;
            case "d":
              e.preventDefault();
              toggleDarkMode();
              break;
            case "r":
              e.preventDefault();
              resetPositions();
              break;
          }
        }
      });

      console.log("ðŸš€ Floating Terminal System Demo loaded");
      console.log(
        "Press Ctrl+N to add terminal, Ctrl+D for dark mode, Ctrl+R to reset positions"
      );
    </script>
  </body>
</html>
